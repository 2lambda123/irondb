<!DOCTYPE html>
<html>

<head>
  <title>Admin Panel</title>
  <%- include('bootstrap/css'); %>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link rel='stylesheet' href='/stylesheets/admin.css' />
</head>

<body>
  <%- include('components/navbar_signed_in'); %>

  <div class='container mt-5 mb-2'>
    <h1> Admin Panel</h1>
  </div>

  <div class='container'>
    <div class="row">
      <div class="card col-md mr-2 pt-2">
        <h3> Manage Database</h3>
      </div>
      <div class="card col-md ml-2 pt-2">
        <h3> Manage Users</h3>
        <table class='table table-bordered table-hover'>
          <thead class="thead-dark">
            <tr>
              <th>ID</th>
              <th>Username</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody class='table-light'>
            <tr>
              <td>1</td>
              <td>user1</td>
              <td>admin</td>
            </tr>
            <tr>
              <td>2</td>
              <td>user2</td>
              <td>admin</td>
            </tr>
          </tbody>
        </table>

      </div>
    </div>
    <div class="row">
      <div class="card col-md mr-2 mt-2 pt-2">
        <div>
          <a class="btn btn-danger btn-large p-2 text-warning " href="../database/unapproved" role="button"> <u>Approval
              Needed</u>
            <span class="h1 badge badge-light">
              <% let pCount = pendingCount <= 4 ? pendingCount : "4+" %>
              <%= pCount %></span>
          </a>
        </div>
        <div>
          <table class="table table-stripd table-bordered table-hover">
            <thead class="thead-dark">
              <tr>
                <th>Body</th>
                <th>Title</th>
                <th>Year</th>
                <th>Author(s)</th>
              </tr>
            </thead>
            <tbody class='table-light'>
              <% let pending = (Pending.length < 4 ? Pending.length : 4) %>
              <% for(var i=0; i < pending; i++) { %>
              <tr>
                <th>
                  <%= Pending[i].nomenclature %>
                </th>
                <th>
                  <%= Pending[i].title %>
                </th>
                <th>
                  <%= Pending[i].published_year %>
                </th>
                <th>
                  <%= Pending[i].authors %>
                </th>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
        <% if (pendingCount > 4) { %>
        <div class="text-right">
          <a class="btn btn-danger btn-sm p-2 text-warning " href="../database/unapproved" role="button"> <u>View More
              Entries
            </u>
          </a>
        </div>
        <% } %>
      </div>
      <div class="card col-md ml-2 mt-2 pt-2">
        <div>
          <a class="btn btn-danger btn-large p-2 text-warning " href="../database/reported" role="button"><u>Reported
              Entries</u>
            <span class="badge badge-light">
              <% let fCount = flaggedCount <= 4 ? flaggedCount : "4+" %>
              <%= fCount %></span>
          </a>
        </div>
        <div>
          <table class="table table-stripd table-bordered table-hover">
            <thead class="thead-dark">
              <tr>
                <th>Body</th>
                <th>Title</th>
                <th>Year</th>
                <th>Author(s)</th>
              </tr>
            </thead>
            <tbody class='table-light'>
              <% let flagged = (Flagged.length < 4 ? Flagged.length : 4) %>
              <% for(var i=0; i < flagged; i++) { %>
              <tr>
                <th>
                  <%= Flagged[i].nomenclature %>
                </th>
                <th>
                  <%= Flagged[i].title %>
                </th>
                <th>
                  <%= Flagged[i].published_year %>
                </th>
                <th>
                  <%= Flagged[i].authors %>
                </th>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
        <% if (flaggedCount > 4) { %>
        <div class="text-right">
          <a class="btn btn-danger btn-sm p-2 text-warning " href="../database/reported" role="button"> <u>View More
              Entries
            </u>
          </a>
        </div>
        <% } %>
      </div>
    </div>
  </div>

  <%- include('bootstrap/js'); %>
</body>

</html>